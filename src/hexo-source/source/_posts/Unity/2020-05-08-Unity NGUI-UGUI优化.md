---
title: "Unity NGUI ä¸ UGUI æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šåŒæ¡†æ¶ä¼˜åŒ–ç­–ç•¥å®Œå…¨æŒ‡å—"
date: 2020/05/08
categories: [æŠ€æœ¯æ–‡ç« , Unityå¼€å‘]
tags: [Unity, NGUI, UGUI, UIä¼˜åŒ–, æ€§èƒ½, DrawCall, OverDraw, Canvas]
image: /images/unity-ngui-ugui-optimization-banner.jpg
---

# ğŸ¨ Unity NGUI ä¸ UGUI æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šåŒæ¡†æ¶ä¼˜åŒ–ç­–ç•¥å®Œå…¨æŒ‡å—

> ğŸ’¡ **åŒæ¡†æ¶ä¼˜åŒ–çš„ä»·å€¼**ï¼š
> - é¡¹ç›®åŒæ—¶ä½¿ç”¨ NGUI å’Œ UGUIï¼Œä¼˜åŒ–ç­–ç•¥ä¸åŒï¼Ÿ
> - NGUI çš„ UIPanel å’Œ UGUI çš„ Canvas æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
> - å¦‚ä½•é’ˆå¯¹ä¸åŒæ¡†æ¶åˆ¶å®šä¼˜åŒ–æ–¹æ¡ˆï¼Ÿ
> - DrawCallã€ç½‘æ ¼é‡å»ºã€OverDraw å¦‚ä½•å…¨é¢ä¼˜åŒ–ï¼Ÿ
>
> **è¿™ç¯‡æ–‡ç« ï¼** å°†å…¨é¢å¯¹æ¯” NGUI å’Œ UGUI ä¼˜åŒ–ç­–ç•¥ï¼Œä»æœºåˆ¶å·®å¼‚åˆ°å®æˆ˜æŠ€å·§ï¼Œè®© UI æ€§èƒ½å…¨é¢æå‡ï¼

---

## ä¸€ã€UI ä¼˜åŒ–æ¦‚è§ˆ

### 1.1 ä¸‰å¤§ä¼˜åŒ–ç›®æ ‡

| ç›®æ ‡ | è¯´æ˜ | å½±å“ |
|-----|------|------|
| **é™ä½æ¸²æŸ“å¼€é”€** | å‡å°‘ DrawCallï¼Œæ§åˆ¶ OverDraw | GPU æ€§èƒ½ |
| **é™ä½æ›´æ–°å¼€é”€** | æ§åˆ¶ç½‘æ ¼é‡å»ºï¼Œé¿å…å…¨é‡æ›´æ–° | CPU æ€§èƒ½ |
| **é«˜æ•ˆå¤„ç†å¤§é‡ HUD** | ä¼˜åŒ–è¡€æ¡ã€é£˜å­—ç­‰é«˜é¢‘å…ƒç´  | æ•´ä½“æ€§èƒ½ |

### 1.2 NGUI ä¸ UGUI å¯¹æ¯”

| ç‰¹æ€§ | NGUI | UGUI |
|-----|------|------|
| **å…ƒç´ æ›´æ–°** | SetActive è§¦å‘é‡å»º | RectTransform å˜æ›´è§¦å‘ |
| **DrawCall åˆå¹¶** | UIPanel ä¸ºå•ä½ | Canvas ä¸ºå•ä½ |
| **ç½‘æ ¼æ›´æ–°** | LateUpdate ä¸­æ›´æ–° | Job System å¤šçº¿ç¨‹ |
| **æ£€æµ‹å·¥å…·** | DrawCall Tool | Frame Debugger |

---

## äºŒã€NGUI ä¼˜åŒ–

### 2.1 å…ƒç´ æ›´æ–°æœºåˆ¶

```
NGUI å…ƒç´ å±•ç¤ºæµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å›¾ç‰‡/æ–‡å­— â”‚â”€â”€>â”‚ é¡¶ç‚¹æ•°æ® â”‚â”€â”€>â”‚ UVæ•°æ®  â”‚â”€â”€>â”‚  Mesh   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                â”‚
     â–¼                                â–¼
 é¢œè‰²ã€æ³•çº¿ã€åˆ‡çº¿                    GPU æ¸²æŸ“
 ä¸‰è§’å½¢é¡¶ç‚¹ç´¢å¼•
```

### 2.2 DrawCall åˆå¹¶è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|-----|------|
| **ä»¥ UIPanel ä¸ºå•ä½** | ä¸åŒ Panel ä¸ä¼šåˆå¹¶ |
| **æŒ‰ Depth æ’åº** | Depth è¿ç»­çš„å…ƒç´ å¯åˆå¹¶ |
| **ç›¸åŒå›¾é›†** | å¿…é¡»ä½¿ç”¨ç›¸åŒå›¾é›†æ‰èƒ½åˆå¹¶ |
| **ç›¸åŒæè´¨** | æè´¨ä¸ä¸€è‡´ä¼šåˆ†å¼€ DrawCall |

### 2.3 ç½‘æ ¼æ›´æ–°æœºåˆ¶

```csharp
// NGUI ä¸¤ç§æ›´æ–°æ¨¡å¼
// 1. UIPanel.FillDrawCall - æ›´æ–°å•ä¸ª DrawCall
// 2. UIPanel.FillAllDrawCalls - æ›´æ–°æ‰€æœ‰ DrawCall (CPU å³°å€¼!)

// æ£€æµ‹ç½‘æ ¼æ›´æ–°
// åœ¨ UIPanel ä¸ŠæŸ¥çœ‹ Widgets OnPanel / Panels Created
```

> âš ï¸ **é‡è¦**ï¼šFillAllDrawCalls é¢‘ç¹è§¦å‘ä¼šå¯¼è‡´ CPU å³°å€¼ï¼

### 2.4 NGUI éšè—å…ƒç´ ç­–ç•¥

| æ–¹æ³• | è§¦å‘é‡å»º | æ¨èåº¦ |
|-----|---------|--------|
| `SetActive(false)` | âœ… æ˜¯ | â­â­ |
| `Color.a = 0` | âŒ å¦ | â­â­â­â­ |
| `Scale = 0` | âŒ å¦ | â­â­â­â­ |
| ç§»é™¤é‡å»º | âœ… æ˜¯ | â­â­â­ |

### 2.5 UIPanel ä¼˜åŒ–é€‰é¡¹

```
Inspector é¢æ¿é€‰é¡¹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ Static     - é™æ€ç•Œé¢ä¸äº§ç”Ÿä½ç§»   â”‚
â”‚ â˜‘ Visible    - ä¸è®¡ç®—åŒ…å›´ç›’        â”‚
â”‚ â˜‘ UIPanel    - æ§åˆ¶ FillAll è°ƒç”¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| é€‰é¡¹ | é€‚ç”¨åœºæ™¯ | æ•ˆæœ |
|-----|---------|------|
| **Static** | é™æ€ç•Œé¢ | ä¸åŠ¨æ€æ›´æ–°ç½‘æ ¼ |
| **Visible** | å®Œå…¨å±•ç¤ºçš„å…ƒç´  | è·³è¿‡åŒ…å›´ç›’è®¡ç®— |

### 2.6 ç‰¹æ®Šç»„ä»¶å¤„ç†

| ç»„ä»¶ | é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|-----|------|---------|
| **UITexture** | å•ç‹¬å ç”¨ DrawCall | åˆå…¥ç›¸åŒå›¾é›†æˆ–åˆ†å±‚ |
| **ç©¿æ’ Depth** | ç ´ååˆæ‰¹ | è®¾ç½®ç›¸è¿‘çš„ Depth |

---

## ä¸‰ã€UGUI ä¼˜åŒ–

### 3.1 å…ƒç´ æ›´æ–°æœºåˆ¶

```csharp
// âŒ è§¦å‘ç½‘æ ¼é‡å»º
gameObject.SetActive(false);
RectTransform.position = newPosition;

// âœ… é¿å…é‡å»ºçš„æ–¹å¼
CanvasGroup.alpha = 0;  // ä¸è§¦å‘é‡å»º
```

### 3.2 DrawCall åˆå¹¶è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|-----|------|
| **Canvas ä¸ºå•ä½** | ä¸åŒ Canvas ä¸ä¼šåˆå¹¶ |
| **å±‚çº§é¡ºåº** | å›¾ç‰‡ä¸å›¾ç‰‡ã€æ–‡å­—ä¸æ–‡å­—åŒçº§ |
| **ç›¸åŒæè´¨** | Material ä¸ä¸€è‡´ä¼šåˆ†å¼€ |
| **ä¸é‡å ** | é‡å å…ƒç´ ä¼šåˆ†å¼€ DrawCall |

### 3.3 ç½‘æ ¼æ›´æ–°æœºåˆ¶

```
UGUI æ›´æ–°æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Canvas.Send â”‚â”€â”€>â”‚ WaitingFor  â”‚â”€â”€>â”‚ PutGeometry â”‚
â”‚ MessageInG  â”‚    â”‚ JobGroupJob â”‚    â”‚ JobFence    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ BatchRender â”‚
                                    â”‚    Flush    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **æç¤º**ï¼šä½¿ç”¨ Frame Debugger æŸ¥çœ‹ Canvas.BuildBatch å¼€é”€ã€‚

### 3.4 DrawCall ä¸Šå‡åŸå› 

| åŸå›  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|-----|------|---------|
| **å±‚çº§ç©¿æ’** | ScrollView ä¸çº¢ç‚¹ç­‰ç©¿æ’ | è°ƒæ•´å±‚çº§é¡ºåº |
| **Z å€¼ä¸ä¸º 0** | ä¸å…¶ä»– UI ä¸åŒ | ç»Ÿä¸€ Z=0 |
| **åŠ¨æ€é®æŒ¡** | è¿è¡Œæ—¶é‡å æ£€æµ‹ | é¿å…åŠ¨æ€é®æŒ¡ |
| **ä¸åŒå›¾é›†** | Tag ç›¸åŒä½†å›¾é›†ä¸åŒ | æ£€æŸ¥å›¾é›†æ‰“åŒ…è®¾ç½® |

### 3.5 Sprite Packer æ³¨æ„

```
å›¾é›†æ‰“åŒ…æ³¨æ„äº‹é¡¹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒ Tag çº¹ç†è¢«æ‰“åŒ…åˆ°ä¸åŒå›¾é›†:        â”‚
â”‚                                     â”‚
â”‚  åŸå› :                               â”‚
â”‚  â€¢ Alpha é€šé“ä¸åŒ                    â”‚
â”‚  â€¢ å‹ç¼©æ–¹å¼ä¸åŒ                      â”‚
â”‚  â€¢ çº¹ç†å°ºå¯¸å·®å¼‚è¿‡å¤§                  â”‚
â”‚                                     â”‚
â”‚  å»ºè®®: ç»Ÿä¸€çº¹ç†å¯¼å…¥è®¾ç½®              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€é€šç”¨ä¼˜åŒ–ç­–ç•¥

### 4.1 åŠ¨é™åˆ†ç¦»

```
Canvas åˆ†ç¦»ç­–ç•¥:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸» Canvas (é™æ€)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ èƒŒæ™¯    â”‚  â”‚ è£…é¥°    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                     â”‚
â”‚  åŠ¨æ€ Canvas (é¢‘ç¹æ›´æ–°)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ è¡€æ¡    â”‚  â”‚ å€’è®¡æ—¶   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                     â”‚
â”‚  ç‰¹æ•ˆ Canvas (ç²’å­/ç‰¹æ•ˆ)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ç²’å­    â”‚  â”‚ ä¼¤å®³é£˜å­— â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 é™ä½æ›´æ–°é¢‘ç‡

```csharp
// âœ… é™ä½å°åœ°å›¾æ›´æ–°é¢‘ç‡
public class MinimapUpdater : MonoBehaviour
{
    public float updateInterval = 0.5f;  // 0.5ç§’æ›´æ–°ä¸€æ¬¡
    private float timer;

    void Update()
    {
        timer += Time.deltaTime;
        if (timer >= updateInterval)
        {
            UpdateMinimap();
            timer = 0;
        }
    }
}
```

### 4.3 é¿å…"æ•æ„Ÿæ“ä½œ"

| æ“ä½œ | é—®é¢˜ | ä¼˜åŒ–æ–¹æ¡ˆ |
|-----|------|---------|
| é¢‘ç¹ SetActive | è§¦å‘å…¨é‡é‡å»º | ä½¿ç”¨ Alpha/Scale |
| è¿ç»­ Position èµ‹å€¼ | å¯èƒ½æ— å˜åŒ– | æ£€æŸ¥å˜åŒ–å†èµ‹å€¼ |
| åŠ¨æ€æ·»åŠ /åˆ é™¤å…ƒç´  | ç ´ååˆæ‰¹ | ä½¿ç”¨å¯¹è±¡æ±  |

```csharp
// âŒ æ¯å¸§èµ‹å€¼å¯èƒ½è§¦å‘é‡å»º
void Update()
{
    rectTransform.position = targetPosition;
}

// âœ… æ£€æŸ¥å˜åŒ–å†èµ‹å€¼
private Vector3 lastPosition;
void Update()
{
    if (targetPosition != lastPosition)
    {
        rectTransform.position = targetPosition;
        lastPosition = targetPosition;
    }
}
```

---

## äº”ã€HUD å…ƒç´ ä¼˜åŒ–

### 5.1 è¡€æ¡ä¼˜åŒ–

| ç­–ç•¥ | è¯´æ˜ |
|-----|------|
| **ä½¿ç”¨ Simple/Filled æ¨¡å¼** | å‡å°‘é¡¶ç‚¹æ•° |
| **ç›¸åŒå›¾é›†** | ç¡®ä¿ DrawCall åˆå¹¶ |
| **åˆ†å¸§åŠ è½½** | é¿å…å•å¸§åˆ›å»ºè¿‡å¤š |
| **æ›¿æ¢ä¸º Shadow** | é¿å…ä¸–ç•Œåæ ‡è½¬æ¢ |

```csharp
// âœ… ä½¿ç”¨ World Space Canvas é¿å…é‡å»º
// å°†ä¸»è§’è¡€æ¡æ”¾åœ¨å•ç‹¬çš„ World Space Canvas
// é¿å…ä¸»è§’ç§»åŠ¨è§¦å‘å…¶ä»– UI é‡å»º
Canvas hpCanvas = Instantiate(hpCanvasPrefab);
hpCanvas.renderMode = RenderMode.WorldSpace;
hpCanvas.worldCamera = uiCamera;
```

### 5.2 ä¼¤å®³é£˜å­—ä¼˜åŒ–

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|-----|---------|
| **é¢‘ç¹åˆ›å»ºé”€æ¯** | ä½¿ç”¨å¯¹è±¡æ±  |
| **æ¯å¸§æ›´æ–°ä½ç½®** | éš”å¸§æ›´æ–° |
| **æ•°é‡çˆ†ç‚¸** | æ§åˆ¶åŒå±æ€»é‡ |
| **æ–‡å­—è½¬å›¾ç‰‡** | ä½¿ç”¨å›¾ç‰‡å­—ä½“ |

```csharp
// âœ… é£˜å­—å¯¹è±¡æ± 
public class DamageTextPool : MonoBehaviour
{
    private Queue<DamageText> pool = new Queue<DamageText>();
    public int maxCount = 20;

    public DamageText Get()
    {
        if (pool.Count > 0)
            return pool.Dequeue();
        return CreateNew();
    }

    public void Return(DamageText text)
    {
        if (pool.Count < maxCount)
            pool.Enqueue(text);
        else
            Destroy(text.gameObject);
    }
}
```

---

## å…­ã€OverDraw ä¼˜åŒ–

### 6.1 OverDraw æ¦‚å¿µ

```
OverDraw ç¤ºæ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¡«å……å€æ•° = å®é™…ç»˜åˆ¶åƒç´  / å±å¹•åƒç´    â”‚
â”‚                                     â”‚
â”‚  èƒŒæ™¯ (1x)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ æŒ‰é’®    â”‚  (2x - é‡å 1æ¬¡)        â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”   â”‚                        â”‚
â”‚  â”‚ â”‚çº¢ç‚¹â”‚   â”‚  (3x - é‡å 2æ¬¡)        â”‚
â”‚  â”‚ â””â”€â”€â”€â”˜   â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ€§èƒ½å‚æ•°

| å‚æ•° | è¯´æ˜ | å»ºè®®å€¼ |
|-----|------|--------|
| **æ€»å¡«å……æ•°å€¼å³°** | å•å¸§æ€»å¡«å……åƒç´ æœ€å¤§å€¼ | è¶Šä½è¶Šå¥½ |
| **å¡«å……å€æ•°å³°å€¼** | å•å¸§æœ€å¤§å¡«å……å€æ•° | <3x |
| **å•å¸§å¡«å……å€æ•°** | æ€»å¡«å……æ•°/åˆ†è¾¨ç‡ | <2x |

### 6.3 ç»˜åˆ¶é¡ºåºä¼˜åŒ–

| é˜Ÿåˆ— | ç»˜åˆ¶é¡ºåº | é€‚ç”¨å¯¹è±¡ |
|-----|---------|---------|
| **Geometry** | ä»å‰å‘å | ä¸é€æ˜ UI |
| **Transparent** | ä»åå‘å‰ | åŠé€æ˜ UI |
| **Overlay** | ä»åå‘å‰ | è¦†ç›–å±‚ UI |

> ğŸ’¡ **æç¤º**ï¼šç§»åŠ¨ç«¯å°½é‡ä½¿ç”¨ Geometry é˜Ÿåˆ—å®ç°ä»å‰å‘åç»˜åˆ¶ï¼

### 6.4 OverDraw ä¼˜åŒ–ç­–ç•¥

| ç­–ç•¥ | è¯´æ˜ |
|-----|------|
| **æ§åˆ¶ç»˜åˆ¶é¡ºåº** | ä»å‰å‘åç»˜åˆ¶ï¼Œåˆ©ç”¨ Early-Z |
| **å‡å°é‡å åŒºåŸŸ** | å‡å°‘ä¸å¿…è¦çš„é‡å  |
| **é•‚ç©ºç»˜åˆ¶** | åªç»˜åˆ¶å¯è§åŒºåŸŸ |
| **ç®€åŒ– UI è®¾è®¡** | å‡å°‘è£…é¥°æ€§é‡å å…ƒç´  |

---

## ä¸ƒã€é’ˆå¯¹æ€§ä¼˜åŒ–

### 7.1 æ–‡å­—ä¼˜åŒ–

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|-----|------|---------|
| **Outline å¼€é”€å¤§** | å¤åˆ¶4ä»½æ–‡å­— Mesh | ä½¿ç”¨ Shadow æ›¿ä»£ |
| **Shadow æ€§èƒ½** | æ·»åŠ é¡¶ç‚¹å®ç°é˜´å½± | ä½¿ç”¨ TextMeshPro |

```csharp
// âœ… TextMeshPro ä¼˜åŠ¿
// - æ›´å°‘çš„é¡¶ç‚¹æ•°
// - æ›´å¥½çš„å­—ä½“æ¸²æŸ“
// - æ”¯æŒä¸°å¯Œçš„æ–‡å­—æ•ˆæœ
// - æ›´å¥½çš„æ€§èƒ½
```

### 7.2 Mask ç»„ä»¶ä¼˜åŒ–

| ç»„ä»¶ | DrawCall å¼€é”€ | OverDraw | æ›¿ä»£æ–¹æ¡ˆ |
|-----|--------------|----------|---------|
| **Mask** | +4 DC | æœ‰ | RectMask2D / MeshMask |
| **RectMask2D** | +0 DC | æ—  | ä»…çŸ©å½¢åŒºåŸŸ |
| **MeshMask** | +1 DC | æ—  | è‡ªå®šä¹‰å½¢çŠ¶ |

### 7.3 Image ç»„ä»¶ä¼˜åŒ–

| è®¾ç½® | æ•ˆæœ |
|-----|------|
| **å–æ¶ˆ Fill Center** | ä¹å®«æ ¼ä¸­å¿ƒé•‚ç©º |
| **ç¦ç”¨ Raycast Target** | ä¸éœ€è¦äº¤äº’çš„å…ƒç´  |
| **é¿å… Tiled ç±»å‹** | å‡å°‘çº¹ç†é‡‡æ · |
| **é¿å… Pixel Perfect** | å‡å°‘è®¡ç®—å¼€é”€ |

### 7.4 ç©ºç»„ä»¶å¤„ç†

```csharp
// âŒ ç©º Image ä»ä¼šæ¸²æŸ“
<Image raycastTarget="true" />

// âœ… ä½¿ç”¨è‡ªå®šä¹‰ Graphic è§£å†³
public class EmptyGraphic : Graphic
{
    protected override void OnPopulateMesh(VertexHelper vh)
    {
        // ä¸ç”Ÿæˆä»»ä½•é¡¶ç‚¹
    }
}
```

---

## å…«ã€ä¼˜åŒ–æ£€æŸ¥æ¸…å•

### 8.1 å¿«é€Ÿæ£€æŸ¥

| æ£€æŸ¥é¡¹ | NGUI | UGUI |
|-------|------|------|
| **DrawCall æ•°é‡** | <50 | <30 |
| **ç½‘æ ¼é‡å»ºé¢‘ç‡** | æ£€æŸ¥ FillAll è°ƒç”¨ | æ£€æŸ¥ BuildBatch |
| **OverDraw** | <2x å¹³å‡ | <2x å¹³å‡ |
| **åŠ¨é™åˆ†ç¦»** | âœ… | âœ… |
| **å¯¹è±¡æ± ** | âœ… | âœ… |

### 8.2 ç¦ç”¨ç»„ä»¶æ¸…å•

| ç»„ä»¶/åŠŸèƒ½ | åŸå›  | æ›¿ä»£æ–¹æ¡ˆ |
|---------|------|---------|
| **UI/Effect/Shadow** | 4ä»½ Mesh é¡¶ç‚¹ | TextMeshPro |
| **UI/Effect/Outline** | ç»§æ‰¿ Shadow æ›´å¼€é”€ | TextMeshPro SDF |
| **Image.Tiled** | é«˜é‡‡æ ·å¼€é”€ | è‡ªå®šä¹‰ Shader |
| **Pixel Perfect** | é¢å¤–è®¡ç®— | æ‰‹åŠ¨å¸ƒå±€ |
| **Text.BestFit** | é¢„ç”Ÿæˆæ‰€æœ‰å­—å· | å›ºå®šå­—å· |

### 8.3 æ€§èƒ½å»ºè®®

| åœºæ™¯ | å»ºè®®é…ç½® |
|-----|---------|
| **PC é¡¹ç›®** | DrawCall <100ï¼Œå¯ä½¿ç”¨ä¸°å¯Œç‰¹æ•ˆ |
| **æ‰‹æ¸¸é«˜ç«¯** | DrawCall <50ï¼Œé€‚åº¦ç‰¹æ•ˆ |
| **æ‰‹æ¸¸ä½ç«¯** | DrawCall <30ï¼Œæœ€ç®€é…ç½® |

---

## ä¹ã€å‚è€ƒèµ„æ–™

- [UWA - UI ä¼˜åŒ–ç›´æ’­è§†é¢‘](https://blog.uwa4d.com/archives/video_UI.html)
- [UWA - NGUI ä¼˜åŒ–è¯¦è§£](https://blog.uwa4d.com/archives/USparkle_NGUI.html)
- [Unity - UI Design Basics](https://docs.unity3d.com/Manual/UIToolkits.html)
- [Unity - UI Optimization](https://docs.unity3d.com/Manual/MobileOptimizationPracticalScriptingOptimizations.html)

---

**è½¬è½½è¯·æ³¨æ˜æ¥æº**ï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ 1487842110@qq.com
