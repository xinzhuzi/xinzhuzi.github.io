---
title: Unity æˆªå›¾å·¥å…·å¼€å‘å®æˆ˜
date: 2020/05/08
categories: [æŠ€æœ¯æ–‡ç« , Unityå¼€å‘]
tags: [Unity, UnityEditor, EditorWindow, RenderTexture, æˆªå›¾å·¥å…·]
---

# Unity æˆªå›¾å·¥å…·å¼€å‘å®æˆ˜

> æœ¬æ–‡ä»‹ç»å¦‚ä½•å¼€å‘ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æˆªå›¾å·¥å…·ï¼Œæ¶µç›– RenderTexture åŸç†ã€åˆ†è¾¨ç‡æ¦‚å¿µã€é€æ˜èƒŒæ™¯æˆªå›¾ç­‰å†…å®¹ã€‚

## ä¸€ã€å±å¹•ä¸åˆ†è¾¨ç‡åŸºç¡€

### 1.1 å±å¹•å°ºå¯¸å®šä¹‰

| æœ¯è¯­ | è¯´æ˜ |
|------|------|
| **å±å¹•å°ºå¯¸** | å¯¹è§’çº¿é•¿åº¦ï¼ˆè‹±å¯¸ï¼‰ |
| **åˆ†è¾¨ç‡** | åƒç´ æ•°é‡ï¼ˆå®½Ã—é«˜ï¼‰ |
| **åƒç´ å¯†åº¦ (PPI)** | æ¯è‹±å¯¸åƒç´ æ•° |
| **DPI** | Dots Per Inchï¼ŒåŒ PPI |

```
å±å¹•å°ºå¯¸è®¡ç®—ï¼ˆå‹¾è‚¡å®šç†ï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚  â† å¯¹è§’çº¿ = å±å¹•å°ºå¯¸ï¼ˆè‹±å¯¸ï¼‰
â”‚   1920 px      â”‚
â”‚                 â”‚
â”‚                 â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    1080 px
```

> ğŸ’¡ 1 è‹±å¯¸ (inch) = 2.54 å˜ç±³ (cm)

### 1.2 å¸¸è§åˆ†è¾¨ç‡æ ‡å‡†

| ç±»å‹ | åˆ†è¾¨ç‡ | å®½é«˜æ¯” |
|------|-------|--------|
| **HD** | 1280Ã—720 | 16:9 |
| **Full HD** | 1920Ã—1080 | 16:9 |
| **2K** | 2560Ã—1440 | 16:9 |
| **4K** | 3840Ã—2160 | 16:9 |
| **æ‰‹æœºç«–å±** | 1080Ã—1920 | 9:16 |

---

## äºŒã€RenderTexture åŸºç¡€

`RenderTexture` æ˜¯ Unity ä¸­ç”¨äºæ¸²æŸ“åˆ°çº¹ç†çš„æ ¸å¿ƒç»„ä»¶ã€‚

### 2.1 RenderTexture æ¦‚å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ¸²æŸ“æµç¨‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Camera â”€â”€â”€â”€â”€â–º RenderTexture â”€â”€â”€â”€â”€â–º Texture2D   â”‚
â”‚                   â”‚                           â”‚    â”‚
â”‚                   â–¼                           â–¼    â”‚
â”‚             GPU FrameBuffer           PNG æ–‡ä»¶    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å…³é”®å‚æ•°

| å‚æ•° | è¯´æ˜ |
|------|------|
| `width` | çº¹ç†å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| `height` | çº¹ç†é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| `depth` | æ·±åº¦ä½æ•°ï¼ˆ0, 16, 24ï¼‰ |
| `format` | çº¹ç†æ ¼å¼ï¼ˆRGBA32, RGB24 ç­‰ï¼‰ |
| `antiAliasing` | æŠ—é”¯é½¿çº§åˆ« |

### 2.3 çº¹ç†æ ¼å¼

| æ ¼å¼ | è¯´æ˜ | ç”¨é€” |
|------|------|------|
| `RGB24` | 24 ä½ RGBï¼Œæ— é€æ˜é€šé“ | æ™®é€šæˆªå›¾ |
| `RGBA32` | 32 ä½ RGBAï¼Œå¸¦é€æ˜é€šé“ | é€æ˜èƒŒæ™¯ |
| `ARGB32` | 32 ä½ ARGBï¼Œå¸¦é€æ˜é€šé“ | æ—§ç‰ˆå…¼å®¹ |
| `RGB565` | 16 ä½ RGB | èŠ‚çœå†…å­˜ |

---

## ä¸‰ã€æˆªå›¾å·¥å…·çª—å£å®ç°

### 3.1 å®Œæ•´ä»£ç 

```csharp
using UnityEngine;
using UnityEditor;
using System.IO;

public class ScreenshotWindow : EditorWindow
{
    // === æˆªå›¾è®¾ç½® ===
    private int resolutionWidth = 1920;
    private int resolutionHeight = 1080;
    private int scale = 1;
    private bool transparentBackground = false;

    // === è¾“å‡ºè®¾ç½® ===
    private string savePath = "Assets/Screenshots/";
    private Camera targetCamera;
    private string lastScreenshotPath = "";

    // === é¢„è§ˆè®¾ç½® ===
    private bool showPreview = true;
    private RenderTexture previewRenderTexture;

    [MenuItem("Tools/Screenshot Tool %#s")]  // Ctrl+Shift+S
    public static void ShowScreenshotWindow()
    {
        var window = GetWindow<ScreenshotWindow>("Screenshot Tool");
        window.minSize = new Vector2(350, 450);
        window.autoRepaintOnSceneChange = true;
        window.Show();
    }

    private void OnGUI()
    {
        EditorGUILayout.LabelField("ğŸ“¸ æˆªå›¾å·¥å…·", EditorStyles.boldLabel);
        EditorGUILayout.Space();

        // åˆ†è¾¨ç‡è®¾ç½®
        DrawResolutionSection();

        // è¾“å‡ºè·¯å¾„è®¾ç½®
        DrawPathSection();

        // æ‘„åƒæœºè®¾ç½®
        DrawCameraSection();

        // æˆªå›¾é¢„è§ˆ
        if (showPreview)
        {
            DrawPreview();
        }

        // æ“ä½œæŒ‰é’®
        DrawActionButtons();
    }

    // === åˆ†è¾¨ç‡è®¾ç½® ===
    private void DrawResolutionSection()
    {
        EditorGUILayout.LabelField("åˆ†è¾¨ç‡è®¾ç½®", EditorStyles.boldLabel);

        resolutionWidth = EditorGUILayout.IntField("å®½åº¦ (Width)", resolutionWidth);
        resolutionHeight = EditorGUILayout.IntField("é«˜åº¦ (Height)", resolutionHeight);

        // ç¼©æ”¾å€æ•°
        scale = EditorGUILayout.IntSlider("è¶…åˆ†è¾¨ç‡ç¼©æ”¾", scale, 1, 4);

        EditorGUILayout.Space();

        // å¿«æ·åˆ†è¾¨ç‡æŒ‰é’®
        EditorGUILayout.BeginHorizontal();
        {
            if (GUILayout.Button("å½“å‰å±å¹•"))
            {
                var size = Handles.GetMainGameViewSize();
                resolutionWidth = (int)size.x;
                resolutionHeight = (int)size.y;
            }

            if (GUILayout.Button("2K (2560Ã—1440)"))
            {
                resolutionWidth = 2560;
                resolutionHeight = 1440;
                scale = 1;
            }

            if (GUILayout.Button("4K (3840Ã—2160)"))
            {
                resolutionWidth = 3840;
                resolutionHeight = 2160;
                scale = 1;
            }
        }
        EditorGUILayout.EndHorizontal();

        // è¾“å‡ºå°ºå¯¸é¢„è§ˆ
        int finalWidth = resolutionWidth * scale;
        int finalHeight = resolutionHeight * scale;
        EditorGUILayout.HelpBox(
            $"è¾“å‡ºå°ºå¯¸: {finalWidth} Ã— {finalHeight} åƒç´ ",
            MessageType.Info
        );
    }

    // === è·¯å¾„è®¾ç½® ===
    private void DrawPathSection()
    {
        EditorGUILayout.Space();
        EditorGUILayout.LabelField("ä¿å­˜è·¯å¾„", EditorStyles.boldLabel);

        EditorGUILayout.BeginHorizontal();
        {
            EditorGUILayout.TextField(savePath, GUILayout.ExpandWidth(false));
            if (GUILayout.Button("æµè§ˆ...", GUILayout.Width(80)))
            {
                savePath = EditorUtility.SaveFolderPanel(
                    "é€‰æ‹©æˆªå›¾ä¿å­˜è·¯å¾„",
                    savePath,
                    Application.dataPath + "/Screenshots"
                );

                if (string.IsNullOrEmpty(savePath))
                {
                    savePath = "Assets/Screenshots/";
                }
            }
        }
        EditorGUILayout.EndHorizontal();

        // æ‰“å¼€æ–‡ä»¶å¤¹æŒ‰é’®
        EditorGUILayout.BeginHorizontal();
        {
            if (GUILayout.Button("æ‰“å¼€ä¿å­˜æ–‡ä»¶å¤¹"))
            {
                if (Directory.Exists(savePath))
                {
                    EditorUtility.RevealInFinder(savePath);
                }
            }

            if (GUILayout.Button("æ‰“å¼€æœ€åæˆªå›¾") && !string.IsNullOrEmpty(lastScreenshotPath))
            {
                EditorUtility.OpenWithDefaultApp(lastScreenshotPath);
            }
        }
        EditorGUILayout.EndHorizontal();
    }

    // === æ‘„åƒæœºè®¾ç½® ===
    private void DrawCameraSection()
    {
        EditorGUILayout.Space();
        EditorGUILayout.LabelField("æ‘„åƒæœºè®¾ç½®", EditorStyles.boldLabel);

        targetCamera = EditorGUILayout.ObjectField(
            new GUIContent("ç›®æ ‡æ‘„åƒæœº", "ç”¨äºæˆªå›¾çš„æ‘„åƒæœº"),
            targetCamera,
            typeof(Camera),
            true
        ) as Camera;

        // è‡ªåŠ¨é€‰æ‹©ä¸»æ‘„åƒæœº
        if (targetCamera == null)
        {
            targetCamera = Camera.main;
        }

        transparentBackground = EditorGUILayout.Toggle(
            new GUIContent("é€æ˜èƒŒæ™¯", "ç”Ÿæˆå¸¦é€æ˜é€šé“çš„ PNG"),
            transparentBackground
        );

        // èƒŒæ™¯é¢œè‰²è®¾ç½®
        if (!transparentBackground && targetCamera != null)
        {
            var oldColor = GUI.backgroundColor;
            GUI.backgroundColor = targetCamera.backgroundColor;
            EditorGUILayout.ColorField("èƒŒæ™¯é¢œè‰²", targetCamera.backgroundColor);
            GUI.backgroundColor = oldColor;
        }
    }

    // === é¢„è§ˆåŒºåŸŸ ===
    private void DrawPreview()
    {
        EditorGUILayout.Space();
        showPreview = EditorGUILayout.Foldout(showPreview, "å®æ—¶é¢„è§ˆ", true);

        if (showPreview)
        {
            EditorGUI.indentLevel++;

            // åˆ›å»ºé¢„è§ˆ RenderTexture
            if (previewRenderTexture == null ||
                previewRenderTexture.width != resolutionWidth ||
                previewRenderTexture.height != resolutionHeight)
            {
                if (previewRenderTexture != null)
                    DestroyImmediate(previewRenderTexture);

                previewRenderTexture = new RenderTexture(resolutionWidth, resolutionHeight, 24);
                previewRenderTexture.hideFlags = HideFlags.HideAndDontSave;
            }

            // å®æ—¶é¢„è§ˆ
            if (targetCamera != null)
            {
                RenderTexture previousRT = targetCamera.targetTexture;
                targetCamera.targetTexture = previewRenderTexture;
                targetCamera.Render();
                targetCamera.targetTexture = previousRT;
            }

            // ç»˜åˆ¶é¢„è§ˆ
            var rect = GUILayoutUtility.GetAspectRect(
                (float)resolutionWidth / resolutionHeight,
                GUILayout.MaxWidth(400)
            );
            GUI.DrawTexture(rect, previewRenderTexture, ScaleMode.ScaleToFit);

            EditorGUI.indentLevel--;
        }
    }

    // === æ“ä½œæŒ‰é’® ===
    private void DrawActionButtons()
    {
        EditorGUILayout.Space(20);

        // æˆªå›¾æŒ‰é’®
        if (GUILayout.Button("ğŸ“· æˆªå–å±å¹•", GUILayout.MinHeight(40)))
        {
            TakeScreenshot();
        }

        EditorGUILayout.Space(10);

        // å…¶ä»–æ“ä½œæŒ‰é’®
        EditorGUILayout.BeginHorizontal();
        {
            if (GUILayout.Button("è®¾ç½®åˆ†è¾¨ç‡"))
            {
                GameViewSize size = GameViewSize.Get(GameViewSizeType.FixedResolution, 1920, 1080);
            }

            if (GUILayout.Button("æ¸…ç©ºç¼“å­˜"))
            {
                if (previewRenderTexture != null)
                {
                    DestroyImmediate(previewRenderTexture);
                    previewRenderTexture = null;
                }
            }
        }
        EditorGUILayout.EndHorizontal();
    }

    // === æ‰§è¡Œæˆªå›¾ ===
    private void TakeScreenshot()
    {
        if (targetCamera == null)
        {
            EditorUtility.DisplayDialog("é”™è¯¯", "è¯·å…ˆé€‰æ‹©ç›®æ ‡æ‘„åƒæœºï¼", "ç¡®å®š");
            return;
        }

        // ç¡®ä¿ç›®å½•å­˜åœ¨
        if (!Directory.Exists(savePath))
        {
            Directory.CreateDirectory(savePath);
        }

        // è®¡ç®—æœ€ç»ˆåˆ†è¾¨ç‡
        int finalWidth = resolutionWidth * scale;
        int finalHeight = resolutionHeight * scale;

        // åˆ›å»ºä¸´æ—¶ RenderTexture
        RenderTexture renderTexture = new RenderTexture(finalWidth, finalHeight, 24);

        // è®¾ç½®çº¹ç†æ ¼å¼
        TextureFormat textureFormat = transparentBackground ? TextureFormat.RGBA32 : TextureFormat.RGB24;

        // åˆ›å»ºæˆªå›¾ Texture2D
        Texture2D screenshot = new Texture2D(finalWidth, finalHeight, textureFormat, false);

        try
        {
            // ä¿å­˜åŸç›®æ ‡çº¹ç†
            RenderTexture previousTarget = targetCamera.targetTexture;
            targetCamera.targetTexture = renderTexture;

            // æ¸²æŸ“
            targetCamera.Render();

            // æ¿€æ´» RenderTexture ä»¥ä¾¿è¯»å–
            RenderTexture.active = renderTexture;

            // è¯»å–åƒç´ 
            screenshot.ReadPixels(new Rect(0, 0, finalWidth, finalHeight), 0, 0);
            screenshot.Apply();

            // æ¢å¤
            targetCamera.targetTexture = previousTarget;
            RenderTexture.active = null;

            // ç¼–ç ä¸º PNG
            byte[] pngBytes = screenshot.EncodeToPNG();

            // ç”Ÿæˆæ–‡ä»¶å
            string timestamp = System.DateTime.Now.ToString("yyyyMMdd_HHmmss");
            string fileName = $"screenshot_{resolutionWidth}x{resolutionHeight}";
            if (scale > 1)
                fileName += $"_{scale}x";

            string filePath = Path.Combine(savePath, $"{fileName}_{timestamp}.png");
            lastScreenshotPath = Path.GetFullPath(filePath);

            // ä¿å­˜æ–‡ä»¶
            File.WriteAllBytes(filePath, pngBytes);

            // åˆ·æ–°èµ„æº
            AssetDatabase.Refresh();

            // æ‰“å¼€æˆªå›¾
            EditorUtility.OpenWithDefaultApp(lastScreenshotPath);

            Debug.Log($"æˆªå›¾å·²ä¿å­˜: {lastScreenshotPath}");
        }
        finally
        {
            // æ¸…ç†èµ„æº
            if (renderTexture != null)
                DestroyImmediate(renderTexture);

            if (screenshot != null)
                DestroyImmediate(screenshot);
        }
    }

    private void OnDestroy()
    {
        // æ¸…ç†é¢„è§ˆçº¹ç†
        if (previewRenderTexture != null)
        {
            DestroyImmediate(previewRenderTexture);
        }
    }
}
```

### 3.2 çª—å£æ•ˆæœé¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ“¸ æˆªå›¾å·¥å…·                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ†è¾¨ç‡è®¾ç½®                                        â”‚
â”‚  å®½åº¦ (Width)      [1920____________]               â”‚
â”‚  é«˜åº¦ (Height)     [1080____________]               â”‚
â”‚  è¶…åˆ†è¾¨ç‡ç¼©æ”¾     â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  1-4        â”‚
â”‚  [å½“å‰å±å¹•] [2K (2560Ã—1440)] [4K (3840Ã—2160)]     â”‚
â”‚  â„¹ è¾“å‡ºå°ºå¯¸: 1920 Ã— 1080 åƒç´                       â”‚
â”‚                                                     â”‚
â”‚  ä¿å­˜è·¯å¾„                                            â”‚
â”‚  [Assets/Screenshots/] [æµè§ˆ...]                   â”‚
â”‚  [æ‰“å¼€ä¿å­˜æ–‡ä»¶å¤¹] [æ‰“å¼€æœ€åæˆªå›¾]                     â”‚
â”‚                                                     â”‚
â”‚  æ‘„åƒæœºè®¾ç½®                                          â”‚
â”‚  ç›®æ ‡æ‘„åƒæœº      [Main Camera (Camera)________]    â”‚
â”‚  âœ“ é€æ˜èƒŒæ™¯     [â–¡]                                â”‚
â”‚                                                     â”‚
â”‚  â–¼ å®æ—¶é¢„è§ˆ                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚    â”‚                             â”‚                  â”‚
â”‚    â”‚      (æ‘„åƒæœºé¢„è§ˆç”»é¢)          â”‚                  â”‚
â”‚    â”‚                             â”‚                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ğŸ“· æˆªå–å±å¹•                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [è®¾ç½®åˆ†è¾¨ç‡] [æ¸…ç©ºç¼“å­˜]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€æˆªå›¾åŸç†è¯¦è§£

### 4.1 æˆªå›¾æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æˆªå›¾å®Œæ•´æµç¨‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   ç”¨æˆ·ç‚¹å‡»æˆªå›¾æŒ‰é’®
         â†“
   åˆ›å»º RenderTexture (æŒ‡å®šå®½é«˜)
         â†“
   è®¾ç½® Camera.targetTexture = RenderTexture
         â†“
   è°ƒç”¨ Camera.Render() (æ¸²æŸ“åˆ°çº¹ç†)
         â†“
   è®¾ç½® RenderTexture.active = RenderTexture
         â†“
   åˆ›å»º Texture2D (è¯»å–åƒç´ )
         â†“
   Texture2D.ReadPixels() (ä» GPU è¯»å–åˆ° CPU)
         â†“
   Texture2D.EncodeToPNG() (ç¼–ç ä¸º PNG)
         â†“
   File.WriteAllBytes() (ä¿å­˜åˆ°æ–‡ä»¶)
         â†“
   æ¸…ç†ä¸´æ—¶èµ„æº
```

### 4.2 å…³é”®ä»£ç è§£æ

```csharp
// 1. åˆ›å»º RenderTextureï¼ˆGPU æ¸²æŸ“ç›®æ ‡ï¼‰
RenderTexture rt = new RenderTexture(width, height, 24);

// 2. è®¾ç½®æ‘„åƒæœºç›®æ ‡çº¹ç†
camera.targetTexture = rt;

// 3. æ¸²æŸ“åœºæ™¯
camera.Render();

// 4. æ¿€æ´» RenderTextureï¼ˆç”¨äºè¯»å–ï¼‰
RenderTexture.active = rt;

// 5. åˆ›å»º Texture2Dï¼ˆå­˜å‚¨åƒç´ æ•°æ®ï¼‰
Texture2D tex = new Texture2D(width, height, TextureFormat.RGBA32, false);

// 6. ä» GPU è¯»å–åƒç´ åˆ° CPU
tex.ReadPixels(new Rect(0, 0, width, height), 0, 0);
tex.Apply();

// 7. ç¼–ç å¹¶ä¿å­˜
byte[] bytes = tex.EncodeToPNG();
File.WriteAllBytes(path, bytes);

// 8. æ¸…ç†
RenderTexture.active = null;
camera.targetTexture = null;
```

---

## äº”ã€é«˜çº§åŠŸèƒ½

### 5.1 å¤šæ‘„åƒæœºæˆªå›¾

```csharp
private void CaptureMultipleCameras()
{
    Camera[] cameras = FindObjectsOfType<Camera>();

    foreach (Camera cam in cameras)
    {
        // ä¸ºæ¯ä¸ªæ‘„åƒæœºå•ç‹¬æˆªå›¾
        CaptureCamera(cam, $"{cam.name}_screenshot.png");
    }
}

private void CaptureCamera(Camera camera, string filename)
{
    int width = 1920;
    int height = 1080;

    RenderTexture rt = new RenderTexture(width, height, 24);
    camera.targetTexture = rt;
    camera.Render();

    Texture2D tex = new Texture2D(width, height, TextureFormat.RGB24, false);
    RenderTexture.active = rt;
    tex.ReadPixels(new Rect(0, 0, width, height), 0, 0);
    tex.Apply();

    byte[] bytes = tex.EncodeToPNG();
    File.WriteAllBytes(Path.Combine(savePath, filename), bytes);

    camera.targetTexture = null;
    RenderTexture.active = null;

    DestroyImmediate(rt);
    DestroyImmediate(tex);
}
```

### 5.2 å®šæ—¶æˆªå›¾

```csharp
private float captureInterval = 1f;  // æˆªå›¾é—´éš”
private float timer = 0f;
private bool isCapturing = false;
private int maxCaptures = 10;
private int captureCount = 0;

private void Update()
{
    if (!isCapturing)
        return;

    timer += Time.deltaTime;

    if (timer >= captureInterval)
    {
        timer = 0f;
        TakeScreenshot();
        captureCount++;

        if (captureCount >= maxCaptures)
        {
            isCapturing = false;
        }
    }
}

private void StartCapture()
{
    isCapturing = true;
    captureCount = 0;
}
```

### 5.3 çº¹ç†æ ¼å¼é€‰æ‹©å™¨

```csharp
private enum ScreenshotFormat
{
    PNG_RGB24,      // PNG æ— é€æ˜
    PNG_RGBA32,     // PNG æœ‰é€æ˜
    JPG,            // JPEG å‹ç¼©
    EXR             // HDR (é«˜åŠ¨æ€èŒƒå›´)
}

private ScreenshotFormat format = ScreenshotFormat.PNG_RGBA32;

private byte[] EncodeTexture(Texture2D tex, ScreenshotFormat fmt)
{
    switch (fmt)
    {
        case ScreenshotFormat.PNG_RGB24:
            return tex.EncodeToPNG();
        case ScreenshotFormat.PNG_RGBA32:
            return tex.EncodeToPNG();
        case ScreenshotFormat.JPG:
            return tex.EncodeToJPG();
        default:
            return tex.EncodeToPNG();
    }
}
```

---

## å…­ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 6.1 é—®é¢˜æ±‡æ€»

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| æˆªå›¾ä¸ºé»‘è‰² | æ‘„åƒæœºæœªæ¸²æŸ“ | æ£€æŸ¥ Camera.enabled |
| æˆªå›¾åˆ†è¾¨ç‡ä¸å¯¹ | ç¼©æ”¾è®¾ç½®é”™è¯¯ | æ£€æŸ¥ scale å‚æ•° |
| å†…å­˜æ³„æ¼ | èµ„æºæœªé‡Šæ”¾ | ç¡®ä¿ DestroyImmediate |
| ä¿å­˜è·¯å¾„é”™è¯¯ | ç›®å½•ä¸å­˜åœ¨ | ä½¿ç”¨ Directory.CreateDirectory |

### 6.2 èµ„æºæ¸…ç†

```csharp
// æ­£ç¡®çš„èµ„æºæ¸…ç†æ–¹å¼
private void CleanupResources()
{
    if (renderTexture != null)
    {
        if (Application.isPlaying)
            Destroy(renderTexture);
        else
            DestroyImmediate(renderTexture);
    }

    if (texture2D != null)
    {
        if (Application.isPlaying)
            Destroy(texture2D);
        else
            DestroyImmediate(texture2D);
    }
}

private void OnDestroy()
{
    CleanupResources();
}
```

---

## ä¸ƒã€æ€»ç»“

æœ¬æ–‡ä»‹ç»äº† Unity æˆªå›¾å·¥å…·çš„å®Œæ•´å®ç°ï¼š

| ä¸»é¢˜ | æ ¸å¿ƒè¦ç‚¹ |
|------|---------|
| **å±å¹•æ¦‚å¿µ** | å°ºå¯¸ã€åˆ†è¾¨ç‡ã€åƒç´ å¯†åº¦ |
| **RenderTexture** | GPU æ¸²æŸ“åˆ°çº¹ç†çš„æ ¸å¿ƒç»„ä»¶ |
| **æˆªå›¾æµç¨‹** | Camera â†’ RenderTexture â†’ Texture2D â†’ PNG |
| **é€æ˜èƒŒæ™¯** | ä½¿ç”¨ RGBA32 æ ¼å¼ |
| **èµ„æºç®¡ç†** | åŠæ—¶æ¸…ç†ä¸´æ—¶èµ„æº |

> ğŸ’¡ **å¼€å‘å»ºè®®**ï¼š
> - ä½¿ç”¨ RenderTexture è¿›è¡Œé«˜è´¨é‡æˆªå›¾
> - æ³¨æ„åŠæ—¶é‡Šæ”¾ä¸´æ—¶èµ„æºé¿å…å†…å­˜æ³„æ¼
> - æ”¯æŒé€æ˜èƒŒæ™¯ä¾¿äºåæœŸå¤„ç†
> - æä¾›å¤šç§åˆ†è¾¨ç‡é¢„è®¾æ–¹ä¾¿ä½¿ç”¨
> - å®ç°é¢„è§ˆåŠŸèƒ½æå‡ç”¨æˆ·ä½“éªŒ

ä¸‹ä¸€ç¯‡å°†è¯¦ç»†ä»‹ç» **Handles åœºæ™¯å¯è§†åŒ–å·¥å…·**ã€‚

---

**è½¬è½½è¯·æ³¨æ˜æ¥æº**ï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ 1487842110@qq.com
