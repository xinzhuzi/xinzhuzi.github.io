---
title: "Unity Editor æ•°æ®å­˜å‚¨å®Œå…¨æŒ‡å—ï¼šEditorPrefsã€ScriptableObject ä¸åºåˆ—åŒ–"
date: 2020/05/08
categories: [æŠ€æœ¯æ–‡ç« , Unityå¼€å‘]
tags: [Unity, UnityEditor, ScriptableObject, æ•°æ®å­˜å‚¨, ç¼–è¾‘å™¨æ‰©å±•, JSON]
image: /images/unity-editor-data-storage-banner.jpg
---

# ğŸ’¾ Unity Editor æ•°æ®å­˜å‚¨å®Œå…¨æŒ‡å—ï¼šä»é…ç½®åˆ°èµ„äº§çš„æŒä¹…åŒ–æ–¹æ¡ˆ

> ğŸ’¡ **æ•°æ®ç®¡ç†çš„ç—›ç‚¹**ï¼š
> - ç¼–è¾‘å™¨å·¥å…·çš„é…ç½®æ¯æ¬¡é‡å¯éƒ½ä¸¢å¤±ï¼Ÿ
> - æƒ³ä¿å­˜ä¸€äº›ç¼–è¾‘å™¨ç”¨æˆ·è®¾ç½®ï¼Œä¸çŸ¥é“ç”¨ä»€ä¹ˆæ–¹æ¡ˆï¼Ÿ
> - ScriptableObjectã€EditorPrefsã€JSON è¯¥æ€ä¹ˆé€‰ï¼Ÿ
> - æ•°æ®åºåˆ—åŒ–å‡ºé—®é¢˜ï¼Œè°ƒè¯•åŠå¤©æ‰¾ä¸åˆ°åŸå› ï¼Ÿ
>
> **åˆ«æ‹…å¿ƒï¼** è¿™ç¯‡æ–‡ç« å°†ç³»ç»Ÿä»‹ç» Unity ç¼–è¾‘å™¨çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼Œå¸®ä½ é€‰æ‹©æœ€åˆé€‚çš„æŒä¹…åŒ–ç­–ç•¥ï¼

## ä¸€ã€æ•°æ®å­˜å‚¨æ–¹æ¡ˆæ¦‚è§ˆ

Unity ç¼–è¾‘å™¨æä¾›äº†å¤šç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå„æœ‰é€‚ç”¨åœºæ™¯ï¼š

| æ–¹æ¡ˆ | ç±»å‹ | é€‚ç”¨åœºæ™¯ | æŒä¹…åŒ–ä½ç½® |
|------|------|---------|-----------|
| **EditorPrefs** | é”®å€¼å¯¹ | ç®€å•é…ç½®å­˜å‚¨ | æ³¨å†Œè¡¨ |
| **EditorUserSettings** | é”®å€¼å¯¹/äºŒè¿›åˆ¶ | ç¼–è¾‘å™¨ç”¨æˆ·è®¾ç½® | é…ç½®æ–‡ä»¶ |
| **ScriptableObject** | èµ„äº§æ–‡ä»¶ | æ•°æ®èµ„äº§ã€è¿è¡Œæ—¶æ•°æ®åº“ | Assets æ–‡ä»¶å¤¹ |
| **JSON** | æ–‡æœ¬ | æ•°æ®äº¤æ¢ã€åºåˆ—åŒ– | è‡ªå®šä¹‰è·¯å¾„ |

> ğŸ’¡ é€‰æ‹©å»ºè®®ï¼šç®€å•é…ç½®ç”¨ EditorPrefsï¼Œå¤æ‚æ•°æ®ç”¨ ScriptableObjectã€‚

---

## äºŒã€EditorPrefs ç¼–è¾‘å™¨åå¥½è®¾ç½®

`EditorPrefs` ç±»ä¼¼äºè¿è¡Œæ—¶çš„ `PlayerPrefs`ï¼Œç”¨äºå­˜å‚¨ç¼–è¾‘å™¨ç›¸å…³çš„é”®å€¼å¯¹æ•°æ®ã€‚

### 2.1 å¸¸ç”¨ API

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `SetBool/SetInt/SetFloat/String` | ä¿å­˜å€¼ |
| `GetBool/GetInt/GetFloat/GetString` | è¯»å–å€¼ |
| `HasKey` | æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ |
| `DeleteKey` | åˆ é™¤æŒ‡å®šé”® |
| `DeleteAll` | æ¸…é™¤æ‰€æœ‰æ•°æ® |

### 2.2 ä»£ç ç¤ºä¾‹

```csharp
using UnityEditor;

public class EditorPrefsExample
{
    private const string WINDOW_POS_KEY = "MyWindow_Position";
    private const string AUTO_SAVE_KEY = "MyWindow_AutoSave";

    // ä¿å­˜çª—å£ä½ç½®
    public static void SaveWindowPosition(Vector2 pos)
    {
        EditorPrefs.SetFloat(WINDOW_POS_KEY + "_X", pos.x);
        EditorPrefs.SetFloat(WINDOW_POS_KEY + "_Y", pos.y);
    }

    // è¯»å–çª—å£ä½ç½®
    public static Vector2 LoadWindowPosition()
    {
        float x = EditorPrefs.GetFloat(WINDOW_POS_KEY + "_X", 100);
        float y = EditorPrefs.GetFloat(WINDOW_POS_KEY + "_Y", 100);
        return new Vector2(x, y);
    }

    // è‡ªåŠ¨ä¿å­˜è®¾ç½®
    public static bool AutoSave
    {
        get => EditorPrefs.GetBool(AUTO_SAVE_KEY, true);
        set => EditorPrefs.SetBool(AUTO_SAVE_KEY, value);
    }
}
```

### 2.3 æ³¨æ„äº‹é¡¹

> âš ï¸ EditorPrefs æ•°æ®å­˜å‚¨åœ¨ç³»ç»Ÿæ³¨å†Œè¡¨ä¸­ï¼Œ**è°¨æ…ä½¿ç”¨ï¼Œå‡ºç°é—®é¢˜ä¸å®˜æ–¹ä¸è´Ÿè´£**ã€‚
>
> ğŸ’¡ å®é™…é¡¹ç›®ä¸­ï¼Œå¤æ‚é…ç½®å»ºè®®ä½¿ç”¨ ScriptableObject æ›¿ä»£ã€‚

---

## ä¸‰ã€EditorUserSettings ç”¨æˆ·è®¾ç½®

`EditorUserSettings` ç”¨äºå­˜å‚¨ç¼–è¾‘å™¨çš„ç”¨æˆ·çº§é…ç½®æ•°æ®ã€‚

### 3.1 API æ–¹æ³•

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `SetConfigValue(key, value)` | ä¿å­˜é…ç½®å€¼ |
| `GetConfigValue(key, defaultValue)` | è¯»å–é…ç½®å€¼ |

### 3.2 æ”¯æŒçš„æ•°æ®ç±»å‹

- åŸºæœ¬ç±»å‹ï¼š`bool`, `int`, `float`, `string`
- äºŒè¿›åˆ¶æ•°æ®ï¼š`byte[]`
- åºåˆ—åŒ–å¯¹è±¡

### 3.3 ä»£ç ç¤ºä¾‹

```csharp
using UnityEditor;

public class EditorUserSettingsExample
{
    private const string PROJECT_SETTINGS_KEY = "Project_CustomSettings";

    public class ProjectSettings
    {
        public bool enableAutoBuild = true;
        public string buildPath = "Builds/";
        public int buildVersion = 1;
    }

    public static void SaveSettings(ProjectSettings settings)
    {
        string json = JsonUtility.ToJson(settings);
        EditorUserSettings.SetConfigValue(PROJECT_SETTINGS_KEY, json);
    }

    public static ProjectSettings LoadSettings()
    {
        string json = EditorUserSettings.GetConfigValue(PROJECT_SETTINGS_KEY);
        if (string.IsNullOrEmpty(json))
        {
            return new ProjectSettings();
        }
        return JsonUtility.FromJson<ProjectSettings>(json);
    }
}
```

---

## å››ã€JSON åºåˆ—åŒ–

Unity å†…ç½®äº† JSON åºåˆ—åŒ–å·¥å…·ã€‚

### 4.1 JsonUtility vs EditorJsonUtility

| ç±» | å‘½åç©ºé—´ | è¯´æ˜ |
|------|---------|------|
| `JsonUtility` | UnityEngine | è¿è¡Œæ—¶å’Œç¼–è¾‘å™¨é€šç”¨ |
| `EditorJsonUtility` | UnityEditor | ç¼–è¾‘å™¨ä¸“ç”¨ï¼Œæ”¯æŒæ›´å¤šç±»å‹ |

### 4.2 JsonUtility åŸºç¡€ç”¨æ³•

```csharp
using UnityEngine;

public class PlayerData
{
    public string playerName;
    public int level;
    public float[] position;
}

// åºåˆ—åŒ–
PlayerData data = new PlayerData
{
    playerName = "Player1",
    level = 10,
    position = new float[] { 1.5f, 2.0f, 0f }
};
string json = JsonUtility.ToJson(data, prettyPrint: true);

// ååºåˆ—åŒ–
PlayerData loadedData = JsonUtility.FromJson<PlayerData>(json);
```

### 4.3 EditorJsonUtility ç¼–è¾‘å™¨ç”¨æ³•

```csharp
using UnityEditor;
using UnityEngine;

public class EditorJsonExample
{
    // æ”¯æŒåºåˆ—åŒ– Unity å¯¹è±¡
    public static void SaveGameObject(GameObject obj, string path)
    {
        string json = EditorJsonUtility.ToJson(obj, prettyPrint: true);
        System.IO.File.WriteAllText(path, json);
    }

    public static GameObject LoadGameObject(string path)
    {
        string json = System.IO.File.ReadAllText(path);
        return EditorJsonUtility.FromJson<GameObject>(json);
    }
}
```

### 4.4 æ³¨æ„äº‹é¡¹

> âš ï¸ Unity å†…ç½® JSON å·¥å…·åŠŸèƒ½æœ‰é™ï¼Œå¤æ‚é¡¹ç›®å»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼š
> - **Newtonsoft.Json** (Json.NET) - åŠŸèƒ½æœ€å…¨
> - **Utf8Json** - é«˜æ€§èƒ½
> - **Jil** - é«˜é€Ÿåºåˆ—åŒ–

---

## äº”ã€ScriptableObject æ•°æ®èµ„äº§

`ScriptableObject` æ˜¯ Unity æœ€å¸¸ç”¨çš„æ•°æ®å®¹å™¨ï¼Œå¯ç”¨äºç¼–è¾‘å™¨ã€æ–‡ä»¶ã€è¿è¡Œæ—¶æ•°æ®åº“ã€‚

### 5.1 ScriptableObject ç‰¹ç‚¹

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| **èµ„äº§æ–‡ä»¶** | å­˜å‚¨ä¸º .asset æ–‡ä»¶ |
| **æ”¯æŒ Inspector** | å¯è§†åŒ–ç¼–è¾‘æ•°æ® |
| **è¿è¡Œæ—¶åŠ è½½** | å¯åœ¨æ¸¸æˆä¸­åŠ¨æ€åŠ è½½ |
| **ç‰ˆæœ¬æ§åˆ¶å‹å¥½** | æ”¯æŒå·®å¼‚å¯¹æ¯” |
| **è·¨åœºæ™¯å…±äº«** | æ•°æ®ä¸éšåœºæ™¯é”€æ¯ |

### 5.2 åˆ›å»º ScriptableObject

#### æ–¹å¼ä¸€ï¼šCreateAssetMenu èœå•åˆ›å»º

```csharp
using UnityEngine;

[CreateAssetMenu(menuName = "Tools/GameConfig", fileName = "GameConfig")]
public class GameConfig : ScriptableObject
{
    [Header("æ¸¸æˆè®¾ç½®")]
    [Range(1, 100)]
    public int maxLevel = 50;

    public bool enableDebugMode = false;

    [Header("æ–‡æœ¬æ•°æ®")]
    public string[] tipTexts = new string[5];

    [Header("é¢œè‰²é…ç½®")]
    public Color playerColor = Color.white;
    public Color enemyColor = Color.red;
}
```

> ä½¿ç”¨æ–¹å¼ï¼šProject çª—å£å³é”® â†’ Create â†’ Tools â†’ GameConfig

#### æ–¹å¼äºŒï¼šMenuItem ä»£ç åˆ›å»º

```csharp
using UnityEngine;
using UnityEditor;

public class ExampleAsset : ScriptableObject
{
    [Range(0, 10)]
    public int number = 3;

    public bool toggle = false;

    public string[] texts = new string[5];

    [MenuItem("Tools/Create ExampleAsset")]
    static void CreateExampleAsset()
    {
        // åˆ›å»ºå®ä¾‹
        var asset = CreateInstance<ExampleAsset>();
        asset.number = 5;
        asset.toggle = true;

        // ä¿å­˜ä¸ºèµ„äº§æ–‡ä»¶
        string path = "Assets/Editor/ExampleAsset.asset";
        AssetDatabase.CreateAsset(asset, path);
        AssetDatabase.Refresh();

        // é€‰ä¸­åˆ›å»ºçš„èµ„äº§
        Selection.activeObject = asset;
        EditorGUIUtility.PingObject(asset);
    }
}
```

### 5.3 è¯»å– ScriptableObject

```csharp
using UnityEngine;
using UnityEditor;

public class ScriptableObjectLoader
{
    private const string ASSET_PATH = "Assets/Editor/ExampleAsset.asset";

    // åœ¨ç¼–è¾‘å™¨ä¸­åŠ è½½
    public static ExampleAsset LoadAsset()
    {
        return AssetDatabase.LoadAssetAtPath<ExampleAsset>(ASSET_PATH);
    }

    // åœ¨è¿è¡Œæ—¶åŠ è½½ï¼ˆæ–‡ä»¶å¿…é¡»åœ¨ Resources æ–‡ä»¶å¤¹ä¸‹ï¼‰
    public static GameConfig LoadRuntime()
    {
        return Resources.Load<GameConfig>("GameConfig");
    }
}
```

### 5.4 æ•°æ®å±•ç¤ºä¸ä¿®æ”¹

ScriptableObject çš„å­—æ®µåœ¨ Inspector ä¸­è‡ªåŠ¨æ˜¾ç¤ºï¼Œå¯ä½¿ç”¨ `[SerializeField]` æ§åˆ¶å¯è§æ€§ï¼š

```csharp
using UnityEngine;

public class PlayerDataAsset : ScriptableObject
{
    // Inspector ä¸­æ˜¾ç¤ºå¹¶å¯ç¼–è¾‘
    [SerializeField]
    public string playerName;

    // Inspector ä¸­æ˜¾ç¤ºä½†è®¾ä¸ºåªè¯»
    [SerializeField]
    private int uniqueId;

    // Inspector ä¸­éšè—
    [HideInInspector]
    public string internalData;

    // å®Œå…¨ä¸åºåˆ—åŒ–
    [System.NonSerialized]
    public int runtimeValue;
}
```

---

## å…­ã€ScriptableObject çˆ¶å­å…³ç³»

ScriptableObject æ”¯æŒåµŒå¥—ç»“æ„ï¼Œä½†éœ€è¦æ³¨æ„æ•°æ®æŒä¹…åŒ–é—®é¢˜ã€‚

### 6.1 åŸºæœ¬åµŒå¥—ç»“æ„

```csharp
using UnityEngine;

public class ChildScriptableObject : ScriptableObject
{
    [SerializeField]
    private string childName;

    public ChildScriptableObject()
    {
        childName = "Default Child";
        name = "New ChildScriptableObject";
    }
}

public class ParentScriptableObject : ScriptableObject
{
    [SerializeField]
    private ChildScriptableObject child;
}
```

### 6.2 æ­£ç¡®ä¿å­˜åµŒå¥—æ•°æ®

> âš ï¸ é—®é¢˜ï¼šç›´æ¥åˆ›å»ºå­å¯¹è±¡å®ä¾‹ï¼Œé‡å¯ Unity ä¼šä¸¢å¤±æ•°æ®ã€‚
>
> ğŸ’¡ è§£å†³ï¼šä½¿ç”¨ `AddObjectToAsset` å»ºç«‹èµ„äº§çˆ¶å­å…³ç³»ã€‚

```csharp
using UnityEngine;
using UnityEditor;

public class ParentScriptableObject : ScriptableObject
{
    private const string PATH = "Assets/Editor/ParentScriptableObject.asset";

    [SerializeField]
    private ChildScriptableObject child;

    [MenuItem("Assets/Create Nested ScriptableObject")]
    static void CreateNestedScriptableObject()
    {
        // åˆ›å»ºçˆ¶å¯¹è±¡
        var parent = CreateInstance<ParentScriptableObject>();

        // åˆ›å»ºå­å¯¹è±¡
        parent.child = CreateInstance<ChildScriptableObject>();
        parent.child.name = "Child Data";

        // å…³é”®ï¼šå°†å­å¯¹è±¡æ·»åŠ åˆ°çˆ¶èµ„äº§ä¸­
        AssetDatabase.AddObjectToAsset(parent.child, PATH);

        // å¯é€‰ï¼šéšè—å­èµ„äº§ï¼Œä½¿å…¶åœ¨ Project çª—å£ä¸­ä¸å¯è§
        parent.child.hideFlags = HideFlags.HideInHierarchy;

        // ä¿å­˜çˆ¶èµ„äº§
        AssetDatabase.CreateAsset(parent, PATH);
        AssetDatabase.ImportAsset(PATH);

        Debug.Log($"åˆ›å»ºæˆåŠŸ: {PATH}");
    }
}
```

### 6.3 HideFlags é€‰é¡¹

| HideFlags | è¯´æ˜ |
|-----------|------|
| `None` | æ­£å¸¸æ˜¾ç¤º |
| `HideInHierarchy` | åœ¨ Hierarchy ä¸­éšè— |
| `HideInInspector` | åœ¨ Inspector ä¸­éšè— |
| `DontSaveInEditor` | ä¸ä¿å­˜åˆ°åœºæ™¯ |
| `DontSaveInBuild` | ä¸ä¿å­˜åˆ°æ„å»º |
| `DontUnloadUnusedAsset` | ä¸è‡ªåŠ¨å¸è½½ |

### 6.4 æ˜¾ç¤º/æ“ä½œå­èµ„äº§

```csharp
using UnityEngine;
using UnityEditor;

public class SubAssetOperations
{
    // æ˜¾ç¤ºæ‰€æœ‰å­èµ„äº§
    [MenuItem("Assets/Show All SubAssets")]
    static void ShowSubAssets()
    {
        var path = AssetDatabase.GetAssetPath(Selection.activeObject);
        foreach (var asset in AssetDatabase.LoadAllAssetsAtPath(path))
        {
            asset.hideFlags = HideFlags.None;
        }
        AssetDatabase.ImportAsset(path);
    }

    // åˆ é™¤å­èµ„äº§
    [MenuItem("Assets/Delete SubAsset")]
    static void DeleteSubAsset()
    {
        var parent = Selection.activeObject as ParentScriptableObject;
        if (parent != null && parent.child != null)
        {
            // å¿…é¡»ä½¿ç”¨ DestroyImmediateï¼Œä¸”ç¬¬äºŒä¸ªå‚æ•°ä¸º true
            Object.DestroyImmediate(parent.child, true);
            parent.child = null;
            AssetDatabase.ImportAsset(AssetDatabase.GetAssetPath(parent));
        }
    }
}
```

---

## ä¸ƒã€EditorWindow ä¸ ScriptableObject

`EditorWindow` æœ¬èº«ç»§æ‰¿è‡ª `ScriptableObject`ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ•°æ®æŒä¹…åŒ–æœºåˆ¶ã€‚

```csharp
using UnityEngine;
using UnityEditor;

public class MyEditorWindow : EditorWindow
{
    private SerializedObject serializedObject;
    private SerializedProperty numberProp;

    // æ•°æ®å­˜å‚¨åœ¨çª—å£èµ„äº§ä¸­
    [SerializeField]
    private int windowNumber = 0;

    [MenuItem("Tools/My Window")]
    static void ShowWindow()
    {
        var window = GetWindow<MyEditorWindow>("My Window");
        window.Show();
    }

    private void OnEnable()
    {
        // ä½¿ç”¨åºåˆ—åŒ–å¯¹è±¡ç®¡ç†æ•°æ®
        serializedObject = new SerializedObject(this);
        numberProp = serializedObject.FindProperty("windowNumber");
    }

    private void OnGUI()
    {
        serializedObject.Update();

        EditorGUILayout.LabelField("çª—å£æ•°æ®", EditorStyles.boldLabel);
        EditorGUILayout.PropertyField(numberProp, new GUIContent("æ•°å­—"));

        serializedObject.ApplyModifiedProperties();
    }
}
```

---

## å…«ã€Inspector ä¸­çš„æ•°ç»„å±•ç¤º

åœ¨è‡ªå®šä¹‰ Inspector ä¸­å±•ç¤ºæ•°ç»„/åˆ—è¡¨ï¼Œä½¿ç”¨ `SerializedProperty`ã€‚

### 8.1 åŸºæœ¬ç”¨æ³•

```csharp
using UnityEngine;
using UnityEditor;

[CustomEditor(typeof(NodeGraph))]
public class NodeGraphInspector : Editor
{
    private SerializedObject serializedObj;
    private SerializedProperty nodePointsProp;

    private void OnEnable()
    {
        serializedObj = new SerializedObject(target);
        nodePointsProp = serializedObj.FindProperty("nodePoints");
    }

    public override void OnInspectorGUI()
    {
        serializedObj.Update();

        // ç»˜åˆ¶æ•°ç»„ï¼Œtrue è¡¨ç¤ºæ˜¾ç¤ºå­å…ƒç´ 
        EditorGUI.BeginChangeCheck();
        EditorGUILayout.PropertyField(
            nodePointsProp,
            new GUIContent("ä½ç½®èŠ‚ç‚¹"),
            true  // includeChildren
        );

        if (EditorGUI.EndChangeCheck())
        {
            serializedObj.ApplyModifiedProperties();
        }
    }
}

// ç›®æ ‡ç±»
public class NodeGraph : MonoBehaviour
{
    public Vector3[] nodePoints = new Vector3[0];
}
```

### 8.2 æ•°ç»„æ“ä½œ API

| API | è¯´æ˜ |
|-----|------|
| `arraySize` | è·å–/è®¾ç½®æ•°ç»„å¤§å° |
| `GetArrayElementAtIndex(index)` | è·å–æŒ‡å®šç´¢å¼•å…ƒç´  |
| `InsertArrayElementAtIndex(index)` | åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´  |
| `DeleteArrayElementAtIndex(index)` | åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´  |
| `ClearArray()` | æ¸…ç©ºæ•°ç»„ |

### 8.3 è‡ªå®šä¹‰æ•°ç»„ç»˜åˆ¶

```csharp
public override void OnInspectorGUI()
{
    serializedObj.Update();

    EditorGUILayout.LabelField("èŠ‚ç‚¹åˆ—è¡¨", EditorStyles.boldLabel);

    // æ˜¾ç¤ºæ•°ç»„å¤§å°
    int size = nodePointsProp.arraySize;
    EditorGUILayout.LabelField($"èŠ‚ç‚¹æ•°é‡: {size}");

    // éå†ç»˜åˆ¶
    for (int i = 0; i < size; i++)
    {
        SerializedProperty element = nodePointsProp.GetArrayElementAtIndex(i);
        EditorGUILayout.PropertyField(element, new GUIContent($"èŠ‚ç‚¹ {i}"));
    }

    // æŒ‰é’®
    if (GUILayout.Button("æ·»åŠ èŠ‚ç‚¹"))
    {
        nodePointsProp.arraySize++;
    }

    if (size > 0 && GUILayout.Button("ç§»é™¤æœ€åèŠ‚ç‚¹"))
    {
        nodePointsProp.arraySize--;
    }

    serializedObj.ApplyModifiedProperties();
}
```

---

## ä¹ã€å®Œæ•´ç¤ºä¾‹ï¼šé…ç½®ç®¡ç†ç³»ç»Ÿ

```csharp
using UnityEngine;
using UnityEditor;
using System.IO;

// é…ç½®æ•°æ®ç±»
[CreateAssetMenu(menuName = "Tools/Project Config")]
public class ProjectConfig : ScriptableObject
{
    [Header("æ„å»ºé…ç½®")]
    public string buildPath = "Builds/";
    public string productName = "My Game";
    public string version = "1.0.0";

    [Header("ç¼–è¾‘å™¨è®¾ç½®")]
    public bool autoSave = true;
    public int autoSaveInterval = 300; // ç§’

    [Header("å¼€å‘é€‰é¡¹")]
    public bool showDebugInfo = false;
    public bool enableLog = true;
}

// é…ç½®ç®¡ç†å™¨
public class ConfigManager
{
    private const string CONFIG_PATH = "Assets/Editor/ProjectConfig.asset";

    private static ProjectConfig _instance;

    public static ProjectConfig Instance
    {
        get
        {
            if (_instance == null)
            {
                _instance = AssetDatabase.LoadAssetAtPath<ProjectConfig>(CONFIG_PATH);
                if (_instance == null)
                {
                    _instance = CreateConfig();
                }
            }
            return _instance;
        }
    }

    private static ProjectConfig CreateConfig()
    {
        var config = CreateInstance<ProjectConfig>();
        AssetDatabase.CreateAsset(config, CONFIG_PATH);
        AssetDatabase.Refresh();
        return config;
    }

    public static void SaveConfig()
    {
        EditorUtility.SetDirty(Instance);
        AssetDatabase.SaveAssets();
    }
}

// é…ç½®ç¼–è¾‘å™¨çª—å£
public class ConfigEditorWindow : EditorWindow
{
    private SerializedObject serializedConfig;

    [MenuItem("Tools/Config Editor")]
    static void ShowWindow()
    {
        GetWindow<ConfigEditorWindow>("é…ç½®ç¼–è¾‘å™¨");
    }

    private void OnGUI()
    {
        if (ConfigManager.Instance == null)
        {
            EditorGUILayout.HelpBox("é…ç½®æ–‡ä»¶ä¸å­˜åœ¨", MessageType.Warning);
            return;
        }

        if (serializedConfig == null)
        {
            serializedConfig = new SerializedObject(ConfigManager.Instance);
        }

        serializedConfig.Update();

        // æ˜¾ç¤ºæ‰€æœ‰å±æ€§
        SerializedProperty prop = serializedConfig.GetIterator();
        prop.Next(true); // è·³è¿‡è„šæœ¬å­—æ®µ
        while (prop.NextVisible(false))
        {
            EditorGUILayout.PropertyField(prop, true);
        }

        serializedConfig.ApplyModifiedProperties();

        // ä¿å­˜æŒ‰é’®
        if (GUILayout.Button("ä¿å­˜é…ç½®"))
        {
            ConfigManager.SaveConfig();
        }
    }
}
```

---

## åã€æ€»ç»“

æœ¬æ–‡ä»‹ç»äº† Unity ç¼–è¾‘å™¨ä¸­çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼š

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåœºæ™¯ |
|------|------|------|---------|
| **EditorPrefs** | ç®€å•æ˜“ç”¨ | å­˜æ³¨å†Œè¡¨ï¼Œä¸å®˜æ–¹è´Ÿè´£ | çª—å£ä½ç½®ç­‰ç®€å•é…ç½® |
| **EditorUserSettings** | æ”¯æŒäºŒè¿›åˆ¶ | è¾ƒå°‘ä½¿ç”¨ | ç”¨æˆ·çº§é…ç½® |
| **ScriptableObject** | å¯è§†åŒ–ã€ç‰ˆæœ¬æ§åˆ¶å‹å¥½ | éœ€è¦åˆ›å»ºèµ„äº§æ–‡ä»¶ | **æ•°æ®èµ„äº§ã€æ¸¸æˆé…ç½®** |
| **JSON** | é€šç”¨æ ¼å¼ | Unity å†…ç½®åŠŸèƒ½æœ‰é™ | æ•°æ®äº¤æ¢ã€å¯¼å…¥å¯¼å‡º |

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š
> - æ¸¸æˆé…ç½®æ•°æ® â†’ ScriptableObject
> - ç¼–è¾‘å™¨å·¥å…·é…ç½® â†’ ScriptableObject + è‡ªå®šä¹‰ Inspector
> - çª—å£çŠ¶æ€ä¿å­˜ â†’ EditorPrefs
> - æ•°æ®å¯¼å…¥å¯¼å‡º â†’ JSON

ä¸‹ä¸€ç¯‡å°†è¯¦ç»†ä»‹ç» **EditorGUI çš„å¸¸ç”¨æ§ä»¶å’Œæ–¹æ³•**ã€‚

---

**è½¬è½½è¯·æ³¨æ˜æ¥æº**ï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ 1487842110@qq.com
