---
title: NGUI å®Œå…¨æŒ‡å— - æ ¸å¿ƒç±»è§£æä¸æ€§èƒ½ä¼˜åŒ–å®æˆ˜
date: 2020/05/08
categories: [æŠ€æœ¯æ–‡ç« , Unityå¼€å‘]
tags: [Unity, NGUI, UIæ¡†æ¶, æ€§èƒ½ä¼˜åŒ–, DrawCall, UIPanel, UIWidget]
---

# NGUI å®Œå…¨æŒ‡å— - æ ¸å¿ƒç±»è§£æä¸æ€§èƒ½ä¼˜åŒ–å®æˆ˜

> æ·±å…¥è§£æ NGUI æ¡†æ¶çš„æ ¸å¿ƒç±»ã€äº‹ä»¶ç³»ç»Ÿã€æ¸²æŸ“æœºåˆ¶ï¼Œå¹¶æä¾›å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ã€‚

---

## ä¸€ã€NGUI ç®€ä»‹

### 1.1 ä»€ä¹ˆæ˜¯ NGUI

NGUI (Next-Gen UI) æ˜¯ Unity ä¸­ä¸€ä¸ªå¼ºå¤§çš„ UI æ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

| ç‰¹ç‚¹ | è¯´æ˜ |
|-----|------|
| **è½»é‡é«˜æ•ˆ** | çº¯ C# å®ç°ï¼Œæ— åŸç”Ÿä¾èµ– |
| **åŠ¨æ€åˆæ‰¹** | è‡ªåŠ¨åˆå¹¶ DrawCall |
| **å®Œæ•´äº‹ä»¶** | æ”¯æŒç‚¹å‡»ã€æ‹–æ‹½ã€æ»šåŠ¨ç­‰äº¤äº’ |
| **å¯è§†åŒ–ç¼–è¾‘** å¼ºå¤§çš„ Inspector é¢æ¿ | |

### 1.2 å­¦ä¹ èµ„æº

| èµ„æº | é“¾æ¥ |
|-----|------|
| **Asset Store** | [NGUI Next-Gen UI](https://assetstore.unity.com/packages/tools/gui/ngui-next-gen-ui-2413) |
| **å®˜æ–¹ç½‘ç«™** | [Tasharen.com](http://www.tasharen.com/) |
| **å®˜æ–¹æ–‡æ¡£** | [NGUI Documentation](http://tasharen.com/ngui/docs/index.html) |
| **å®˜æ–¹è§†é¢‘** | [YouTube Playlist](https://www.youtube.com/playlist?list=PLI_jd5nXafTbBrubTmgbodCtWY6BhVxtP) |

---

## äºŒã€UI æ ¸å¿ƒä¸‰è¦ç´ 

### 2.1 ä¸‰è¦ç´ æ¦‚è§ˆ

```
NGUI ä¸‰å¤§æ ¸å¿ƒè¦ç´ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å›¾ç‰‡   â”‚    â”‚  å­—ä½“   â”‚    â”‚  äº‹ä»¶   â”‚  â”‚
â”‚  â”‚UISprite â”‚    â”‚UILabel  â”‚    â”‚UICamera â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚      â”‚              â”‚              â”‚        â”‚
â”‚      â–¼              â–¼              â–¼        â”‚
â”‚  çº¹ç†/å›¾é›†      å­—ä½“æ–‡ä»¶      äº‹ä»¶å“åº”ç³»ç»Ÿ  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| è¦ç´  | ç»„ä»¶ | ä½œç”¨ |
|-----|------|------|
| **å›¾ç‰‡** | UISprite | UI æ˜¾ç¤ºçš„ä¸»è¦è§†è§‰å…ƒç´  |
| **å­—ä½“** | UILabel | æ–‡å­—æ˜¾ç¤ºç»„ä»¶ |
| **äº‹ä»¶** | UICamera | å¤„ç†ç”¨æˆ·äº¤äº’è¾“å…¥ |

---

## ä¸‰ã€äº‹ä»¶ç³»ç»Ÿ (UICamera)

### 3.1 äº‹ä»¶è§¦å‘åŸç†

```
äº‹ä»¶æ£€æµ‹æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·è¾“å…¥ â”‚â”€â”€>â”‚ å±å¹•åƒç´  â”‚â”€â”€>â”‚ å°„çº¿æ£€æµ‹ â”‚â”€â”€>â”‚ ç¢°æ’ç›’  â”‚
â”‚é¼ æ ‡/è§¦æ‘¸ â”‚    â”‚ ç‚¹è½¬æ¢   â”‚    â”‚Raycast  â”‚    â”‚Collider â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   äº‹ä»¶åˆ†å‘           â”‚
                                    â”‚   onClick/OnDrag    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å°„çº¿æ£€æµ‹æ¨¡å¼

| æ¨¡å¼ | å°„çº¿æ–¹å¼ | ç¢°æ’æ£€æµ‹ | å›è°ƒ |
|-----|---------|---------|------|
| **World_3D** | Camera.ScreenPointToRay | Physics.Raycast | Ignore (ä¸å›è°ƒ) |
| **UI_3D** | Camera.ScreenPointToRay | Physics.RaycastNonAlloc | Collide (è§¦å‘æ¬¡æ•°) |
| **World_2D** | Plane.Raycast | Physics2D.OverlapPoint | Collider2D |
| **UI_2D** | Plane.Raycast | Physics2D.OverlapPointNonAlloc | Collider2D |

### 3.3 äº‹ä»¶ç±»å‹

| äº‹ä»¶ | è§¦å‘æ¡ä»¶ | å…¸å‹ç”¨é€” |
|-----|---------|---------|
| **OnHover** | é¼ æ ‡æ‚¬åœ | æŒ‰é’®é«˜äº® |
| **OnPress** | æŒ‰ä¸‹/é‡Šæ”¾ | æŒ‰é’®ç‚¹å‡» |
| **OnClick** | ç‚¹å‡»é‡Šæ”¾ | èœå•é€‰æ‹© |
| **OnDoubleClick** | åŒå‡» (0.4så†…) | å¿«é€Ÿæ“ä½œ |
| **OnDragStart** | å¼€å§‹æ‹–åŠ¨ | æ‹–æ‹½ç‰©å“ |
| **OnDrag** | æ‹–åŠ¨ä¸­ | æ»‘åŠ¨æ¡ |
| **OnDragEnd** | æ‹–åŠ¨ç»“æŸ | ç‰©å“æ”¾ç½® |
| **OnKey** | é”®ç›˜è¾“å…¥ | å¿«æ·é”® |

### 3.4 äº‹ä»¶ç›‘å¬å®ç°

```csharp
// âœ… ä½¿ç”¨ UIEventListener
public class MyButton : MonoBehaviour
{
    void Start()
    {
        UIEventListener listener = GetComponent<UIEventListener>();
        listener.onClick = OnButtonClick;
        listener.onHover = OnButtonHover;
    }

    void OnButtonClick(GameObject go)
    {
        Debug.Log("Button clicked: " + go.name);
    }

    void OnButtonHover(GameObject go, bool isHover)
    {
        // å¤„ç†æ‚¬åœçŠ¶æ€
    }
}
```

---

## å››ã€æ¸²æŸ“ç³»ç»Ÿ

### 4.1 æ¸²æŸ“å™¨ç»„æˆ

```
Mesh æ¸²æŸ“æ‰€éœ€æ•°æ®:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MeshRenderer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Mesh                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ vertices (é¡¶ç‚¹åæ ‡)    â”‚   â”‚
â”‚  â”‚  â”œâ”€ triangles (é¡¶ç‚¹ç´¢å¼•)   â”‚   â”‚
â”‚  â”‚  â”œâ”€ uv (çº¹ç†åæ ‡)         â”‚   â”‚
â”‚  â”‚  â”œâ”€ colors (é¡¶ç‚¹é¢œè‰²)      â”‚   â”‚
â”‚  â”‚  â””â”€ normals (æ³•çº¿)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”œâ”€ Material (æè´¨)                â”‚
â”‚  â”œâ”€ Shader (ç€è‰²å™¨)                â”‚
â”‚  â””â”€ Color (é¢œè‰²)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ¸²æŸ“æ›´æ–°è§¦å‘æ¡ä»¶

| æ•°æ®å˜åŒ– | æ˜¯å¦é‡æ–°æ¸²æŸ“ | è¯´æ˜ |
|---------|------------|------|
| **vertices** | âœ… æ˜¯ | é¡¶ç‚¹åæ ‡æ”¹å˜ |
| **triangles** | âœ… æ˜¯ | ä¸‰è§’å½¢ç´¢å¼•æ”¹å˜ |
| **colors** | âœ… æ˜¯ | é¢œè‰²æ”¹å˜ |
| **uv** | âœ… æ˜¯ | çº¹ç†åæ ‡æ”¹å˜ |
| **normals** | âœ… æ˜¯ | æ³•çº¿æ”¹å˜ |

> âš ï¸ **é‡è¦**ï¼šä»¥ä¸Šä»»ä½•å€¼æ”¹å˜éƒ½ä¼šè§¦å‘ VBO é‡æ–°ç¼“å­˜ï¼

### 4.3 VBO (Vertex Buffer Object)

```
VBO ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GPU ç¼“å­˜åŒº                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é¡¶ç‚¹ä¿¡æ¯                   â”‚   â”‚
â”‚  â”‚  é¢œè‰²ä¿¡æ¯                   â”‚   â”‚
â”‚  â”‚  æ³•çº¿ä¿¡æ¯                   â”‚   â”‚
â”‚  â”‚  çº¹ç†åæ ‡ä¿¡æ¯               â”‚   â”‚
â”‚  â”‚  ç´¢å¼•ä¿¡æ¯                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  ä¼˜åŒ–æ–¹å‘: å‡å°‘æ•°æ®ä¼ è¾“é¢‘ç‡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€æ ¸å¿ƒç±»è¯¦è§£

### 5.1 UIRect

| åŠŸèƒ½ | è¯´æ˜ |
|-----|------|
| **çŸ©å½¢æ¡†å®šä¹‰** | è§„å®š UI çŸ©å½¢èŒƒå›´å’Œé”šç‚¹ |
| **ç›¸å¯¹é”šç‚¹** | è®¾ç½®ç›¸å¯¹äºçˆ¶ UI çš„ä½ç½® |
| **ä½ç½®æ›´æ–°** | ç»´æŠ¤çˆ¶å­å…³ç³»ï¼Œæ£€æµ‹å˜åŒ– |
| **çµæ´»å®šä½** | æ”¯æŒå±å¹•å››è§’ä»»ä¸€ä¸ºåŸç‚¹ |

### 5.2 UIGeometry

```
UIGeometry æ•°æ®ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UIGeometry                        â”‚
â”‚  â”œâ”€ verts (é¡¶ç‚¹åæ ‡)               â”‚
â”‚  â”œâ”€ uvs (çº¹ç†åæ ‡)                 â”‚
â”‚  â”œâ”€ colors (é¡¶ç‚¹é¢œè‰²)              â”‚
â”‚  â””â”€ normals (æ³•çº¿)                 â”‚
â”‚                                     â”‚
â”‚  ç”¨äº UIWidget çš„ç¼“å­˜æ•°æ®            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| è®¡ç®—ç¤ºä¾‹ | ä¸‰è§’å½¢ | é¡¶ç‚¹ |
|---------|-------|------|
| 1 ä¸ªå­—æ¯ 'A' | 2 | 4 |
| 1 ä¸ªæ±‰å­— 'çˆ±' | 2 | 4 |
| 'çˆ±ä½ ï¼Œçˆ±ä¸–äºº' | 12 | 24 |

### 5.3 UIWidget

| å±æ€§ | è¯´æ˜ | ä¼˜åŒ–å»ºè®® |
|-----|------|---------|
| **Depth** | æ¸²æŸ“é¡ºåº | é¿å…åŠ¨æ€ä¿®æ”¹ |
| **çŸ©å½¢é€‚é…** | UIRect ç®¡ç† | ä½¿ç”¨ Anchor |
| **æ•°æ®å¡«å……** | OnFill æ–¹æ³• | ç¼“å­˜ä¸å˜æ•°æ® |
| **UIDrawCall** | DrawCall å¼•ç”¨ | ç”± UIPanel ç®¡ç† |

```csharp
// âŒ ä¸å»ºè®®é¢‘ç¹ä¿®æ”¹
void Update()
{
    widget.depth = Random.Range(0, 100);  // æ¯æ¬¡é‡å»ºæ‰€æœ‰ DC
}

// âœ… æ­£ç¡®åšæ³•
void Start()
{
    widget.depth = initialDepth;  // åªè®¾ç½®ä¸€æ¬¡
}
```

### 5.4 UIDrawCall

| åŠŸèƒ½ | è¯´æ˜ |
|-----|------|
| **è®°å½• UI ç°‡** | ç®¡ç†ä¸€ç»„å¯åˆæ‰¹çš„ Widget |
| **åˆ›å»º Mesh** | åŠ¨æ€ç”Ÿæˆç½‘æ ¼æ•°æ® |
| **è®¾ç½®æ¸²æŸ“å™¨** | é…ç½® MeshRenderer |
| **æ›´æ–°æœºåˆ¶** | å±€éƒ¨æ›´æ–° vs å…¨é‡é‡å»º |

> ğŸ’¡ **æ ¸å¿ƒè®¾è®¡**ï¼šä¸€ä¸ª UIDrawCall = ä¸€æ¬¡ DrawCall = ä¸€ä¸ª Batch

### 5.5 UIPanel

```
UIPanel æ¶æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UIPanel                            â”‚
â”‚  â”œâ”€ ç®¡ç† UIWidget åˆ—è¡¨             â”‚
â”‚  â”œâ”€ ç®¡ç† UIDrawCall åˆ—è¡¨           â”‚
â”‚  â”œâ”€ æ¸²æŸ“é˜Ÿåˆ— (Render Q: 3000+)     â”‚
â”‚  â”œâ”€ æ·±åº¦æ’åº (Depth æ’åº)           â”‚
â”‚  â””â”€ åŠ¨æ€åˆæ‰¹ç®¡ç†                   â”‚
â”‚                                     â”‚
â”‚  LateUpdate:                        â”‚
â”‚  1. æ›´æ–°æ‰€æœ‰ Widget                 â”‚
â”‚  2. å¡«å……å‡ ä½•æ•°æ®                    â”‚
â”‚  3. åˆ›å»º UIDrawCall                 â”‚
â”‚  4. æ›´æ–° Mesh                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€DrawCall åˆæ‰¹è§„åˆ™

### 6.1 åˆæ‰¹æ¡ä»¶

| æ¡ä»¶ | è¦æ±‚ |
|-----|------|
| **ç›¸åŒ UIPanel** | å¿…é¡»å±äºåŒä¸€ä¸ª Panel |
| **ç›¸åŒå›¾é›†** | çº¹ç†å¿…é¡»ä¸€è‡´ |
| **ç›¸åŒæè´¨** | Material å¿…é¡»ä¸€è‡´ |
| **è¿ç»­ Depth** | ä¸èƒ½æœ‰å…¶ä»–æè´¨ç©¿æ’ |

### 6.2 Depth æ’åºç¤ºä¾‹

```
é”™è¯¯æ’åº (ç©¿æ’):
å›¾é›†A Depth:0, 2, 4, 6
å­—ä½“  Depth: 1, 3, 5, 7
ç»“æœ: 8 ä¸ª DrawCall

æ­£ç¡®æ’åº (åˆ†ç»„):
å›¾é›†A Depth:0, 1, 2, 3
å­—ä½“  Depth:4, 5, 6, 7
ç»“æœ: 2 ä¸ª DrawCall
```

---

## ä¸ƒã€ä¼˜åŒ–ç­–ç•¥

### 7.1 æ€§èƒ½æ ‡å‡†

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|-----|-------|
| **CPU è€—æ—¶** | 0-5ms |
| **UIPanel.LateUpdate** | 0.4-8.4ms |
| **DrawCall æ•°é‡** | <40 |
| **å †å†…å­˜åˆ†é…** | <20MB/10Kå¸§ |

### 7.2 ä¼˜åŒ–æŠ€å·§

| æŠ€å·§ | è¯´æ˜ | æ•ˆæœ |
|-----|------|------|
| **åŠ¨é™åˆ†ç¦»** | é™æ€/åŠ¨æ€ UI åˆ†ç¦» Panel | å‡å°‘æ›´æ–°èŒƒå›´ |
| **Static æ ‡å¿—** | é™æ€ç•Œé¢å‹¾é€‰ Static | è·³è¿‡æ·±åº¦è®¡ç®— |
| **Depth åˆ†å±‚** | å›¾é›†ä¸å­—ä½“åˆ†å¼€æ·±åº¦ | å‡å°‘ DC |
| **å…ƒç´ éšè—** | ä½¿ç”¨ Alpha=0 è€Œé SetActive | é¿å…é‡å»º |
| **ç§»å‡ºå±å¹•** | Position ç§»å‡ºè§†é‡ | é¿å…æ¸²æŸ“ |

### 7.3 UIGeometry ç¼“å­˜æ± 

```csharp
// âœ… BetterList å®ç°
public class GeometryBufferPool
{
    private Stack<List<Vector3>> vertexPool = new Stack<List<Vector3>>();
    private Stack<List<int>> indexPool = new Stack<List<int>>();

    public List<Vector3> GetVertexList(int capacity)
    {
        if (vertexPool.Count > 0)
        {
            var list = vertexPool.Pop();
            list.Capacity = capacity;
            return list;
        }
        return new List<Vector3>(capacity);
    }

    public void ReturnVertexList(List<Vector3> list)
    {
        list.Clear();
        vertexPool.Push(list);
    }
}
```

---

## å…«ã€è¾…åŠ©å·¥å…·

### 8.1 Panel Tool

```
NGUI > Open > Panel Tool
åŠŸèƒ½: æŸ¥çœ‹ Panel ä¸‹çš„æ•°æ®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Panel Tool è¾“å‡º:                    â”‚
â”‚  â”œâ”€ DrawCall æ•°é‡                   â”‚
â”‚  â”œâ”€ ä¸‰è§’å½¢æ•°é‡                      â”‚
â”‚  â”œâ”€ é¡¶ç‚¹æ•°é‡                        â”‚
â”‚  â””â”€ æ¸²æŸ“é¡ºåº                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Draw Call Tool

```
NGUI > Open > Draw Call Tool
åŠŸèƒ½: æ˜¾ç¤ºæ‰€æœ‰ DC ä¿¡æ¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Draw Call Tool è¾“å‡º:                â”‚
â”‚  â”œâ”€ DC åˆ—è¡¨                         â”‚
â”‚  â”œâ”€ Material å¼•ç”¨                    â”‚
â”‚  â”œâ”€ Render Q å€¼                      â”‚
â”‚  â””â”€ ç»Ÿè®¡ä¿¡æ¯                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 å®å®šä¹‰

```csharp
// UIDrawCall.cs
#define SHOW_HIDDEN_OBJECTS

// å¯ç”¨åå¯åœ¨ Hierarchy ä¸­çœ‹åˆ°æ‰€æœ‰ DC
// æ¯ä¸ª DC çš„ Inspector å¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
```

---

## ä¹ã€å›¾é›†ä¸å­—ä½“

### 9.1 å›¾é›† (Atlas)

| ä½œç”¨ | è¯´æ˜ |
|-----|------|
| **å‡å°‘ DC** | ç›¸åŒå›¾é›†å¯åˆæ‰¹ |
| **å‡å°‘ DrawCall** | å•æ¬¡ç»˜åˆ¶å¤šå…ƒç´  |
| **å†…å­˜ä¼˜åŒ–** | çº¹ç†åˆå¹¶å‡å°‘å¼€é”€ |

### 9.2 å­—ä½“ä¼˜åŒ–

| å­—ä½“ç±»å‹ | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|---------|------|---------|
| **é™æ€å­—ä½“** | é¢„ç”Ÿæˆå›¾é›† | å›ºå®šæ–‡å­— |
| **åŠ¨æ€å­—ä½“** | å®æ—¶ç”Ÿæˆ Mesh | åŠ¨æ€æ–‡å­— (å¤§é‡ä½¿ç”¨æ—¶æ…ç”¨) |

---

## åã€ä¼˜åŒ–æ£€æŸ¥æ¸…å•

### 10.1 é€šç”¨æ£€æŸ¥

- [ ] DrawCall æ•°é‡ < 40
- [ ] UIPanel.LateUpdate è€—æ—¶ < 5ms
- [ ] å›¾é›†ä¸å­—ä½“åˆ†å±‚è®¾ç½®
- [ ] é™æ€ UI å‹¾é€‰ Static
- [ ] é¿å…é¢‘ç¹ä¿®æ”¹ Depth
- [ ] ä½¿ç”¨ Alpha éšè—è€Œé SetActive

### 10.2 å†…å­˜ä¼˜åŒ–

- [ ] ä½¿ç”¨ BetterList æ›¿ä»£ List
- [ ] å®ç° UIGeometry ç¼“å­˜æ± 
- [ ] è®¾ç½®åˆç†çš„ Capacity
- [ ] ä½¿ç”¨ 4 å€æ‰©å®¹è€Œé 2 å€
- [ ] é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯æ•°ç»„

### 10.3 é—ç•™é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|-----|---------|
| **å¤šè¡€æ¡æ€§èƒ½** | åˆ†å±‚ç­–ç•¥ã€World Space Canvas |
| **å¤æ‚åŠ¨ç”»é‡å»º** | åŠ¨é™åˆ†ç¦»ã€ç‹¬ç«‹ Panel |
| **åŠ¨æ€å­—ä½“å¼€é”€** | å¤§é‡æ–‡å­—ä½¿ç”¨é™æ€å­—ä½“ |

---

## åä¸€ã€å‚è€ƒèµ„æ–™

- [UWA - NGUI æ€§èƒ½ä¼˜åŒ–æŠ€å·§](https://blog.uwa4d.com/archives/USparkle_NGUI.html)
- [UWA - UI ä¼˜åŒ–è§†é¢‘](https://blog.uwa4d.com/archives/video_UI.html)
- [çŸ¥ä¹ - NGUI æ ¸å¿ƒç±»è®²è§£](https://zhuanlan.zhihu.com/p/102544809)

---

**è½¬è½½è¯·æ³¨æ˜æ¥æº**ï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ 1487842110@qq.com
